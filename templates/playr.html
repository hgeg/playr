<!doctype html>
<html lang="en">
  <head>
    <title>Playr</title>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="/static/favicon.ico"/>
    <link rel="stylesheet" href="/static/grid.css" />
    <link rel="stylesheet" href="/static/style.css" />
    <script type="text/javascript" src="/static/zepto.min.js"></script>
    <script type="text/javascript" src="/static/zepto.fx.js"></script>
    <script>
      Zepto(function($) {
          $('.container').animate({opacity:1},800,'ease-out');
      });
      $(window).keydown(function(event){
        url = $('#url');
        if(event.which==13) {
          event.preventDefault();
          val = url.val();
          if(val.length<2) return;
          $('#loader').animate({opacity:1},250,'ease-out');
          $.post('/playr/',$('#form').serialize(),function(data) {
            if(data=='url') {
              url.attr({placeholder:val});
            }else if(data=='torrent') {
              url.attr({placeholder:'Playing torrent'});
            }else if(data.indexOf('control')==0) {
              url.attr({placeholder:data.slice(7)});
            }else if(data.indexOf('queue')==0) {
              url.attr({placeholder:data.slice(6)});
            }else {
              url.attr({placeholder:'Cannot play media'});
              //DEBUG
              //url.attr({placeholder:data});
            }
            url.val('');
            $('#loader').animate({opacity:0},250,'ease-out');
          });
        }else {
          if(url.val().length > 0)
            url.attr({placeholder:'http://'});
        }
      });
    </script>
  </head>
  <body>
    <div class="container" style="opacity:0;">
      <div class='row'></div>
      <div class='row'>
          <div class='span ten'><h2><small>&#9654;</small>Playr
            <img id="loader" width="28px" height="28px" src="/static/loading.gif" style="vertical-align:middle;opacity:0;">
          </h2></div>
      </div>
        <form id="form">
          <div class='span ten'>
              <textarea autofocus autocomplete="off" onblur="this.focus();return false" id="url" name="url" class="main-input" placeholder="http://" rows="50"></textarea>
          </div>
        </form>
        <p class="bottom">
        <b>Controls</b> </br>
        "play"  resume playing.</br>
        "pause" pause media.</br>
        "ff"  fast-forward 30 seconds.</br>
        "rw"  rewind 30 seconds.
        </p>
    </div>
  </body>
</html>
